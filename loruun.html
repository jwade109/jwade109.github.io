<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" type="image/x-icon" href="resources/favicon.ico">
    <title>Loruun</title>
  </head>

  <body>

    <div class="center" style="text-align: center">
      <h1>Parser</h1>
      <input id="treeInput"
        class="loruun"
        type="text"
        name="input"
        value="vo afisan be lo kli subli?"
        placeholder="vo afisan be lo kli subli?">
      </input>
    </div>

    <div class="center" style="width: 60%">
      <pre id="output" style="font-size: 28px"></pre>
      <script src="scripts/language/loruun.js"></script>
      <script src="scripts/language/compiler.js"></script>
      <script>

        var treeInput = document.getElementById("treeInput");
        var output = document.getElementById("output");
        treeInput.addEventListener("keyup", function(event)
        {
            if (treeInput.value == "")
            {
                output.innerHTML = "";
                return;
            }
            let tr = "";
            try
            {
                tr = structStr(parse(tokenize(treeInput.value)));
            }
            catch (e) {};
            console.log(tr);
            tr = tr.replace(/->/g, '**');
            tr = tr.replace(/[\<\>]/g, '');
            tr = tr.replace(/\*\*/g, '->');
            tr = tr.replace(/\\n/g, '<br>');
            event.preventDefault();
            output.innerHTML = tr;
        });
        // treeInput.dispatchEvent(new Event("keyup"));

      </script>
    </div>

    <div style="text-align: center">
      <h1>Dictionary</h1>
      <table id="dictionary">
        <tr>
          <th>English</th>
          <th>Loruun</th>
          <th>Definition</th>
          <th>Type</th>
          <th>ID</th>
        </tr>
      </table>
      <script>

        function entry2table(entry)
        {
            return "<tr>" +
              "<td>" + entry.english + "</td>" +
              "<td>" + entry.loruun + "</td>" +
              "<td>" + entry.definition + "</td>" +
              "<td>" + entry.type + "</td>" +
              "<td>" + entry.id + "</td>" + "</tr>";
        }

        dict.sort(function(e1, e2)
        {
            // console.log(e1.english, e2.english, e1.english < e2.english);
            return e1.english > e2.english ? 1 : -1;
        });
        let table = document.getElementById("dictionary");
        for (let entry of dict)
        {
            table.innerHTML += entry2table(entry);
        }

      </script>

      <div id="version"></div>
    </div>

  </body>

  <script src="scripts/global.js"></script>
</html>
